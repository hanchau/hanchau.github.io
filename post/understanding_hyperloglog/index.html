<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.65.3" />

  <title>HyperLogLog! &middot; Anuj Chauhan</title>

  <meta name="description" content="Elegance of LogLog/HyperLogLog, A Cardinality Estimation Algorithm" />

  
  <meta property="og:locale" content="en"/>

  
  <meta property="og:image" content="https://hanchau.github.io/images/profile.png">

  
  <meta property="og:site_name" content="Anuj Chauhan"/>
  <meta property="og:title" content="HyperLogLog!"/>
  <meta property="og:description" content="Elegance of LogLog/HyperLogLog, A Cardinality Estimation Algorithm"/>
  <meta property="og:url" content="https://hanchau.github.io/post/understanding_hyperloglog/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2020-04-19T00:00:00Z"/>
  <meta property="article:modified_time" content="2020-04-19T00:00:00Z"/>
  <meta property="article:author" content="">
  
  
  

  <script type="application/ld+json">
  {
    "@context" : "http://schema.org",
    "@type" : "Blog",
    "name": "Anuj Chauhan",
    "url" : "https://hanchau.github.io/",
    "image": "https://hanchau.github.io/images/profile.png",
    "description": ""
  }
  </script>

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "name": "HyperLogLog!",
    "headline": "HyperLogLog!",
    "datePublished": "2020-04-19T00:00:00Z",
    "dateModified": "2020-04-19T00:00:00Z",
    "author": {
      "@type": "Person",
      "name": "",
      "url": "https://hanchau.github.io/"
    },
    "image": "https://hanchau.github.io/images/profile.png",
    "url": "https://hanchau.github.io/post/understanding_hyperloglog/",
    "description": "Elegance of LogLog\/HyperLogLog, A Cardinality Estimation Algorithm"
  }
  </script>
  


  <link type="text/css"
        rel="stylesheet"
        href="https://hanchau.github.io/css/print.css"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="https://hanchau.github.io/css/poole.css">

  <link type="text/css"
        rel="stylesheet"
        href="https://hanchau.github.io/css/hyde.css">

  


  

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed"
        sizes="144x144"
        href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>
<body>
  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <img src="https://hanchau.github.io/images/profile.png" class="img-circle img-headshot center" alt="Profile Picture">
        </div>
        
      

      <h1>Anuj Chauhan</h1>

      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://hanchau.github.io/">Home</a>
        </li>
        <li>
          <a href="/posts/"> Posts </a>
        </li><li>
          <a href="/about/"> About </a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://www.linkedin.com/in/anuj-chauhan-b23329121" rel="me" title="Linkedin">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
      
      <a href="https://github.com/hanchau" rel="me" title="GitHub">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


  <main class="content container">
  <div class="post">
  <h1>HyperLogLog!</h1>

  <div class="post-date">
    <time datetime="2020-04-19T00:00:00Z">Apr 19, 2020</time> · 2 min read
  </div>

  <p>This article offers a basic understanding of a Cardinality Estimation Algorithm.</p>
<h4 id="cardinality">Cardinality</h4>
<p>Quoting <a href="https://en.wikipedia.org/wiki/Cardinality">wikipedia</a>, the Cardinality is nothing but &ldquo;the number of elements in a given set&rdquo;.</p>
<h4 id="cardinality-estimation-algorithm">Cardinality Estimation Algorithm</h4>
<p>In last post we discussed CAP theorem and saw why it becomes hard to make systems Availabile and Consistent when there are potential partitions in the systems. I was thinking about my next post back then and finialized Consistent Hashing, But then I came across an idea to first write about HyperLogLog beacause of its Elegance and Power.</p>
<p>Let&rsquo;s jump into it. I&rsquo;m just gonna throw a problem at you.</p>
<pre><code>We have a list of elements and we want to count the number of distinct elements in that list. How can we solve it?
</code></pre><blockquote>
<p>NOTE: Before proceeding please give it some thoughts. Few hints: Can we do it in one parse. Think of bloom filters. Think of approximating it. Think of upper bounding it, cuz every finite set must have finite distinct elements, right?</p>
</blockquote>
<p>This all have started with counting, The list example is just to simplify it. The real use case would be to estimate big number like-</p>
<pre><code>I have a webpage and I want to count the distinct IPs that have landed on the page.
</code></pre><p>Let&rsquo;s sart solving it.</p>
<h5 id="famework">Famework</h5>
<p>We&rsquo;ll take these points in consideration when we&rsquo;ll solve the problem with multiple approaches -</p>
<ul>
<li>Space Complexity</li>
<li>Time Complexity</li>
<li>Estimation error</li>
</ul>
<p>Some fundamental operations are -</p>
<ul>
<li>Load(x) : Store x in the memory.</li>
<li>Lookup(x,map): lookup x in a map.</li>
</ul>
<h5 id="approach-1-maintains-a-hash-map">Approach 1: Maintains a Hash Map</h5>
<pre><code>1. def distinct(L):
2.     _hMap = {}                         # A Hash Map
3.     for i in L:
4.         if Lookup(i,_hMap):
5              _hMap[i] += 1
6.         else:
7.             _hMap[i] = 1
8.     return len(_hMap)
9.
10. L = Load(element)                     # Space Complexity = O(n)
11. crdnlty = distinct(L)                 # Time Complexity = O(n)
</code></pre><p>Approach 1 simply maintains a hasmap in the memory. So whenever a new element comes, it looks up the element in the map and if it exists then it updates the count of that element and if the element doesnt exist then it updates the hasmap with the element.</p>
<table>
<thead>
<tr>
<th>Space Complexity</th>
<th>Time Complexity</th>
<th>Estimation Error %</th>
</tr>
</thead>
<tbody>
<tr>
<td>O(n)</td>
<td>O(n)</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Thanks, Cheers &amp; Happy Glogging.</p>
</div>


  </main>

  <footer>
  <div class="copyright">
    &copy; hanchau 2020 · <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-162005503-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>
</html>
